module.exports = {
	ContextMenu: function ContextMenu(options) {
		var div = document.createElement("div"),
			list = document.createElement("ul"),
			item = document.createElement("li");
		this.element = div;
		div.setAttribute("class", "UI-Context-Menu");

		div.appendChild(list);
		list.appendChild(item);
		if (options.directory == true) {
			div.setAttribute("class", "Directory UI-Context-Menu");
			options.menuItems = UI.defaults.contextMenu.options.directoryMenuItems;
			item.innerHTML = "<a class='icon' style='background-image:url(/app/data/192/dark/open.png);' href='javascript:openFolder(\"" + options.resource + "\");' title='Open'>Open</a>";
		}
		if (options.menuItems.length == 0) {
			options.menuItems = UI.defaults.contextMenu.options.menuItems;
			item.innerHTML = "<a target='_blank' class='icon' style='background-image:url(/app/data/192/dark/download.png);' href='" + options.resource + "' >Download</a>";
		}
		options.menuItems.forEach(function (menuItem) {
			item = document.createElement("li");
			item.innerHTML = menuItem.name;
			item.setAttribute("data-resource", options.resource);
			item.setAttribute("data-name", options.name);
			item.setAttribute("class", "icon");
			item.setAttribute("style", "background-image:url(" + menuItem.icon + ")");
			item.addEventListener("click", function (evt) {
				menuItem.click(evt);
			}, true);
			list.appendChild(item);
		});
	}
}
